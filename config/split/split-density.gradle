rootProject.ext.makeVersionCodeForDensity = { densityName ->
    // Assign different version code for each output

    // Version code patch:             XX  // [1;2] digits
    // Version code minor:          XX_00  // [2;3] digits
    // Version code major:      XXX_00_00  // [3;5] digit
    // Version code density:  X_000_00_00  // {5} digits

    // Version code: d_MMM_mm_pp with
    //  - d: density code
    //  - MMM: major code
    //  - mm: minor code
    //  - pp: patch code

    // Min version code:  1_000_00_00
    // Max version code:  6_999_99_99

    def densityCodes = [all: 1, mdpi: 2, hdpi: 3, xhdpi: 4, xxhdpi: 5, xxxhdpi: 6]

    def key = densityName == null ? "all" : densityName
    return densityCodes.get(key) * 1_000_00_00 + rootProject.ext.appVersionCode
}